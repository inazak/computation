package test

import (
  "testing"
  "github.com/inazak/computation/logicgate/v02/logicgate/simulation/control"
)


func Test_Mux_01(t *testing.T) {

  tc := TestCase {
    Script: `
      LO 9900
      HI 9901
      CLOCK 9909
      //Mux(9900, 9900, 9900) -> 0024
      NAND 0001 0002 0003
      CONNECT 9900 0001
      CONNECT 9900 0002
      NAND 0004 0005 0006
      CONNECT 9900 0004
      CONNECT 0003 0005
      NAND 0007 0008 0009
      CONNECT 0006 0007
      CONNECT 0006 0008
      NAND 0010 0011 0012
      CONNECT 9900 0010
      CONNECT 9900 0011
      NAND 0013 0014 0015
      CONNECT 0012 0013
      CONNECT 0012 0014
      NAND 0016 0017 0018
      CONNECT 0009 0016
      CONNECT 0009 0017
      NAND 0019 0020 0021
      CONNECT 0015 0019
      CONNECT 0015 0020
      NAND 0022 0023 0024
      CONNECT 0018 0022
      CONNECT 0021 0023
      //Mux(9900, 9901, 9900) -> 0048
      NAND 0025 0026 0027
      CONNECT 9900 0025
      CONNECT 9900 0026
      NAND 0028 0029 0030
      CONNECT 9900 0028
      CONNECT 0027 0029
      NAND 0031 0032 0033
      CONNECT 0030 0031
      CONNECT 0030 0032
      NAND 0034 0035 0036
      CONNECT 9901 0034
      CONNECT 9900 0035
      NAND 0037 0038 0039
      CONNECT 0036 0037
      CONNECT 0036 0038
      NAND 0040 0041 0042
      CONNECT 0033 0040
      CONNECT 0033 0041
      NAND 0043 0044 0045
      CONNECT 0039 0043
      CONNECT 0039 0044
      NAND 0046 0047 0048
      CONNECT 0042 0046
      CONNECT 0045 0047
      //Mux(9901, 9900, 9900) -> 0072
      NAND 0049 0050 0051
      CONNECT 9900 0049
      CONNECT 9900 0050
      NAND 0052 0053 0054
      CONNECT 9901 0052
      CONNECT 0051 0053
      NAND 0055 0056 0057
      CONNECT 0054 0055
      CONNECT 0054 0056
      NAND 0058 0059 0060
      CONNECT 9900 0058
      CONNECT 9900 0059
      NAND 0061 0062 0063
      CONNECT 0060 0061
      CONNECT 0060 0062
      NAND 0064 0065 0066
      CONNECT 0057 0064
      CONNECT 0057 0065
      NAND 0067 0068 0069
      CONNECT 0063 0067
      CONNECT 0063 0068
      NAND 0070 0071 0072
      CONNECT 0066 0070
      CONNECT 0069 0071
      //Mux(9901, 9901, 9900) -> 0096
      NAND 0073 0074 0075
      CONNECT 9900 0073
      CONNECT 9900 0074
      NAND 0076 0077 0078
      CONNECT 9901 0076
      CONNECT 0075 0077
      NAND 0079 0080 0081
      CONNECT 0078 0079
      CONNECT 0078 0080
      NAND 0082 0083 0084
      CONNECT 9901 0082
      CONNECT 9900 0083
      NAND 0085 0086 0087
      CONNECT 0084 0085
      CONNECT 0084 0086
      NAND 0088 0089 0090
      CONNECT 0081 0088
      CONNECT 0081 0089
      NAND 0091 0092 0093
      CONNECT 0087 0091
      CONNECT 0087 0092
      NAND 0094 0095 0096
      CONNECT 0090 0094
      CONNECT 0093 0095
      //Mux(9900, 9900, 9901) -> 0120
      NAND 0097 0098 0099
      CONNECT 9901 0097
      CONNECT 9901 0098
      NAND 0100 0101 0102
      CONNECT 9900 0100
      CONNECT 0099 0101
      NAND 0103 0104 0105
      CONNECT 0102 0103
      CONNECT 0102 0104
      NAND 0106 0107 0108
      CONNECT 9900 0106
      CONNECT 9901 0107
      NAND 0109 0110 0111
      CONNECT 0108 0109
      CONNECT 0108 0110
      NAND 0112 0113 0114
      CONNECT 0105 0112
      CONNECT 0105 0113
      NAND 0115 0116 0117
      CONNECT 0111 0115
      CONNECT 0111 0116
      NAND 0118 0119 0120
      CONNECT 0114 0118
      CONNECT 0117 0119
      //Mux(9900, 9901, 9901) -> 0144
      NAND 0121 0122 0123
      CONNECT 9901 0121
      CONNECT 9901 0122
      NAND 0124 0125 0126
      CONNECT 9900 0124
      CONNECT 0123 0125
      NAND 0127 0128 0129
      CONNECT 0126 0127
      CONNECT 0126 0128
      NAND 0130 0131 0132
      CONNECT 9901 0130
      CONNECT 9901 0131
      NAND 0133 0134 0135
      CONNECT 0132 0133
      CONNECT 0132 0134
      NAND 0136 0137 0138
      CONNECT 0129 0136
      CONNECT 0129 0137
      NAND 0139 0140 0141
      CONNECT 0135 0139
      CONNECT 0135 0140
      NAND 0142 0143 0144
      CONNECT 0138 0142
      CONNECT 0141 0143
      //Mux(9901, 9900, 9901) -> 0168
      NAND 0145 0146 0147
      CONNECT 9901 0145
      CONNECT 9901 0146
      NAND 0148 0149 0150
      CONNECT 9901 0148
      CONNECT 0147 0149
      NAND 0151 0152 0153
      CONNECT 0150 0151
      CONNECT 0150 0152
      NAND 0154 0155 0156
      CONNECT 9900 0154
      CONNECT 9901 0155
      NAND 0157 0158 0159
      CONNECT 0156 0157
      CONNECT 0156 0158
      NAND 0160 0161 0162
      CONNECT 0153 0160
      CONNECT 0153 0161
      NAND 0163 0164 0165
      CONNECT 0159 0163
      CONNECT 0159 0164
      NAND 0166 0167 0168
      CONNECT 0162 0166
      CONNECT 0165 0167
      //Mux(9901, 9901, 9901) -> 0192
      NAND 0169 0170 0171
      CONNECT 9901 0169
      CONNECT 9901 0170
      NAND 0172 0173 0174
      CONNECT 9901 0172
      CONNECT 0171 0173
      NAND 0175 0176 0177
      CONNECT 0174 0175
      CONNECT 0174 0176
      NAND 0178 0179 0180
      CONNECT 9901 0178
      CONNECT 9901 0179
      NAND 0181 0182 0183
      CONNECT 0180 0181
      CONNECT 0180 0182
      NAND 0184 0185 0186
      CONNECT 0177 0184
      CONNECT 0177 0185
      NAND 0187 0188 0189
      CONNECT 0183 0187
      CONNECT 0183 0188
      NAND 0190 0191 0192
      CONNECT 0186 0190
      CONNECT 0189 0191
    `,
    Expect: [][]Pair {
      {
        { "0024", control.LO },
        { "0048", control.LO },
        { "0072", control.HI },
        { "0096", control.HI },
        { "0120", control.LO },
        { "0144", control.HI },
        { "0168", control.LO },
        { "0192", control.HI },
      },
      {
        { "0024", control.LO },
        { "0048", control.LO },
        { "0072", control.HI },
        { "0096", control.HI },
        { "0120", control.LO },
        { "0144", control.HI },
        { "0168", control.LO },
        { "0192", control.HI },
      },
      {
        { "0024", control.LO },
        { "0048", control.LO },
        { "0072", control.HI },
        { "0096", control.HI },
        { "0120", control.LO },
        { "0144", control.HI },
        { "0168", control.LO },
        { "0192", control.HI },
      },
    },
  }

  DoTest(t, tc)
}

